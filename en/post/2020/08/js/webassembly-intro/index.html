<!DOCTYPE html>

<html lang="en">
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta name="keywords"
        content="browsers,JavaScript,WebAssembly," />
    <meta name="description"
        content="This post provides a comprehensive overview of the JavaScript APIs for WebAssembly, and demonstrates how to generate WASM from C code and use it from JavaScript in a web page." />
    <title>Neutrino&#39;s Blog: A Comprehensive Guide to Using WebAssembly </title>
    
    
    
    
    
    
        
            <link rel="alternate" hreflang="zh" href="https://tigercosmos.xyz/post/2020/08/js/webassembly-intro/">
        
            <link rel="alternate" hreflang="en" href="https://tigercosmos.xyz/en/post/2020/08/js/webassembly-intro/">
        
            <link rel="alternate" hreflang="jp" href="https://tigercosmos.xyz/jp/post/2020/08/js/webassembly-intro/">
        
        
        <link rel="alternate" hreflang="x-default" href="https://tigercosmos.xyz/post/2020/08/js/webassembly-intro/">
    
    <!-- favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
<link rel="stylesheet" href="/css/style.css">


        <!-- highlight -->
        <link id="hljs-light" rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/atom-one-light.min.css" />
        <link id="hljs-dark" rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/atom-one-dark.min.css" disabled />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

        <script>
            // Dark mode functionality
            function toggleDarkMode() {
                const html = document.documentElement;
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                // Update toggle button
                const toggle = document.getElementById('theme-toggle');
                toggle.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
                
                // Toggle syntax highlighting theme
                toggleSyntaxHighlighting(newTheme);
            }

            // Toggle syntax highlighting theme
            function toggleSyntaxHighlighting(theme) {
                const lightTheme = document.getElementById('hljs-light');
                const darkTheme = document.getElementById('hljs-dark');
                
                if (theme === 'dark') {
                    lightTheme.disabled = true;
                    darkTheme.disabled = false;
                } else {
                    lightTheme.disabled = false;
                    darkTheme.disabled = true;
                }
            }

            // Initialize theme on page load
            function initializeTheme() {
                const savedTheme = localStorage.getItem('theme') || 'light';
                const html = document.documentElement;
                html.setAttribute('data-theme', savedTheme);
                
                const toggle = document.getElementById('theme-toggle');
                if (toggle) {
                    toggle.textContent = savedTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
                }
                
                // Initialize syntax highlighting
                toggleSyntaxHighlighting(savedTheme);
            }

            window.addEventListener('DOMContentLoaded', function () {
                initializeTheme();
                const [
                    mainTitle,
                    mobileMenu,
                    mobileMainTitle,
                    mobileMenuBtn,
                    ipadMenuBtn,
                    aside,
                    closeBtn,
                ] = getEle(
                    '#main-title',
                    '.mobile-menu',
                    '.mobile-menu h3',
                    '.mobile-menu button',
                    '.ipad-menu',
                    'aside',
                    'aside .close',
                )
                const io = new IntersectionObserver(entries => {
                    if (entries[0].intersectionRatio <= 0) {
                        mobileMainTitle.classList.remove('invisibile')
                    } else {
                        mobileMainTitle.classList.add('invisibile')
                    }
                })
                io.observe(mainTitle)

                clickToggleAside(mobileMenuBtn)
                clickToggleAside(ipadMenuBtn)
                clickToggleAside(closeBtn, false)

                const isMenuVisible = window.getComputedStyle(mobileMenu).display !== 'none'
                if (isMenuVisible) document.body.style.background = 'none'

                function getEle(...args) {
                    return args.map(arg => document.querySelector(arg))
                }

                function clickToggleAside(btn, show = true) {
                    btn.addEventListener('click', function () {
                        if (show) {
                            aside.style.display = 'block'
                        } else {
                            aside.style.display = 'none'
                        }
                    })
                }
            })
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-MGLC34ST00"></script>
        <script>
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());

            gtag('config', 'G-MGLC34ST00');
        </script>
        <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async>
        </script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
            tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
            TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
            messageStyle: "none"
        }); 

        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Neutrino's Blog" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>


<body style="background: url(https://cdn.jsdelivr.net/gh/frontendsophie/hexo-theme-autumn@1.0.0/source/img/button-bg.png) var(--bg-color)">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container">
        <header class="header">
    <nav class="mobile-menu" style="background: url(https://cdn.jsdelivr.net/gh/frontendsophie/hexo-theme-autumn@1.0.0/source/img/button-bg.png) var(--bg-color)">
        <h3 class="invisibile">
            <a href="/en/" class="logo">
                Neutrino&#39;s Blog
            </a>
        </h3>
        <button class="menu">menu</button>
    </nav>

    <button class="ipad-menu menu">menu</button>

    <h1 class="title" id="main-title">
        <a href="/en/" class="logo">
            Neutrino&#39;s Blog
        </a>
    </h1>
    <h2 class="desc">
        Code makes the world a better place
    </h2>

    <div class="links">
        <ul>
            
            <li>
                <a href="/about">
                    About
                </a>
            </li>
            
            <li>
                <a href="/navigation">
                    Navigation
                </a>
            </li>
            
            <li>
                <a href="/books">
                    Books
                </a>
            </li>
            
            <li>
                <a href="/donation">
                    Donation
                </a>
            </li>
            
            <li>
                <a href="/message">
                    Message
                </a>
            </li>
            
            <li>
                <a href="/atom.xml">
                    RSS
                </a>
            </li>
            
            <li>
                <a href="#" id="theme-toggle" onclick="toggleDarkMode()" title="Toggle dark mode">
                    ğŸŒ™
                </a>
            </li>
            
            
            <li class="translation-switcher">
                
                <button class="translation-button" type="button" aria-label="Translations" title="Translations">
                    <svg viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false">
                        <path d="M12 2a10 10 0 1 0 10 10A10.01 10.01 0 0 0 12 2Zm7.94 9h-3.15a15.46 15.46 0 0 0-1.31-5.04A8.03 8.03 0 0 1 19.94 11ZM12 4.08A13.4 13.4 0 0 1 13.89 11H10.1A13.4 13.4 0 0 1 12 4.08ZM4.06 13h3.15a15.46 15.46 0 0 0 1.31 5.04A8.03 8.03 0 0 1 4.06 13ZM7.21 11H4.06A8.03 8.03 0 0 1 8.52 5.96 15.46 15.46 0 0 0 7.21 11ZM12 19.92A13.4 13.4 0 0 1 10.1 13h3.79A13.4 13.4 0 0 1 12 19.92ZM15.48 18.04A15.46 15.46 0 0 0 16.79 13h3.15A8.03 8.03 0 0 1 15.48 18.04ZM16.79 11a15.46 15.46 0 0 0-1.31-5.04A8.03 8.03 0 0 1 19.94 11Z"></path>
                    </svg>
                    <span class="translation-current" aria-hidden="true">en</span>
                </button>
                <div class="translation-menu" aria-label="Translation menu">
                    
                        
                            <a class="translation-lang" href="/post/2020/08/js/webassembly-intro/" hreflang="zh" lang="zh">zh</a>
                        
                    
                        
                            <span class="translation-lang is-current" lang="en">en</span>
                        
                    
                        
                            <a class="translation-lang" href="/jp/post/2020/08/js/webassembly-intro/" hreflang="jp" lang="jp">jp</a>
                        
                    
                </div>
            </li>
            
        </ul>
    </div>
</header>

        <main class="main">
            <article class="post">
    
    
    
    <h2 class="post-title">
        A Comprehensive Guide to Using WebAssembly
    </h2>
    <ul class="post-date">
        <li>
            2020-08-17
        </li>
        <li>
            Liu, An-Chi åŠ‰å®‰é½Š
        </li>
        
        
        <li class="post-languages">
            <span class="post-languages-label">Lang</span>
            
                
                    <a class="translation-lang" href="/post/2020/08/js/webassembly-intro/" hreflang="zh" lang="zh">zh</a>
                
                ,
            
                
                    <span class="translation-lang is-current" lang="en">en</span>
                
                ,
            
                
                    <a class="translation-lang" href="/jp/post/2020/08/js/webassembly-intro/" hreflang="jp" lang="jp">jp</a>
                
                
            
            <span class="post-languages-note">
                (original ZH, translation powered by AI)
            </span>
        </li>
        
    </ul>
    <div class="post-content">
        <h2 id="1-Introduction"><a class="header-anchor" href="#1-Introduction">Â¶ </a>1. Introduction</h2>
<p>Letâ€™s start with the basics: what is WebAssembly, and why do we need it?</p>
<p>Today, web technology is everywhere. People spend hours online every day, enjoying all kinds of services. More and more applications are moving to the web, and desktop or mobile apps increasingly adopt web-based implementations (Web Apps) or hybrid architectures (Hybrid Apps). In a sense, web technology has taken over the world.</p>
<p>The web runs on JavaScript (JS). As browsers and JS engines have evolved, we seem to have reached a bottleneck for performance optimization. No matter how fast JS becomes, because it is an interpreted language, it reads and compiles code line by line at runtime. This execution model is inevitably slower than compiled languages such as C++.</p>
<p>Then you might ask: why not use compiled languages like C++ directly on the web? Because whether you compile ahead of time or compile in the browser, there are trade-offs. Ahead-of-time compilation typically produces large binaries; shipping those to the browser can waste network transfer time. If you ship source-like representations and compile in the browser, you may still pay a significant compile time before you can run. With JS, the source files are relatively small (so transfer is acceptable), and the browser can compile incrementally as it reads, so earlier compiled parts can start running sooner without making the experience unbearably slow.</p>
<p>Either way, JS performance has limits. People wanted a way to make web applications run faster in browsers, and that is where WebAssembly (WASM) comes in. WASM is a low-level, assembly-like format whose performance can approach native codeâ€”similar to what you get from C++ or Rust. In web development, JS and WASM are used together. The basic idea is: keep general application logic in JS, but move compute-heavy parts into precompiled WASM to significantly improve performance. This way, you get both fast startup (JS) and high performance for heavy computation (WASM).</p>
<p>Next, this post introduces how to develop using JS together with WASM.</p>
<span id="more"></span>
<h2 id="2-WebAssembly-JavaScript-API-overview"><a class="header-anchor" href="#2-WebAssembly-JavaScript-API-overview">Â¶ </a>2. WebAssembly JavaScript API overview</h2>
<p>The main WebAssembly objects are:</p>
<ol>
<li><strong>Load/initialize WebAssembly:</strong> the <code>WebAssembly.compile()</code> / <code>WebAssembly.instantiate()</code> functions.</li>
<li><strong>Create WebAssembly memory buffers (Memory) / tables (Table):</strong> the <code>WebAssembly.Memory()</code> / <code>WebAssembly.Table()</code> constructors.</li>
<li><strong>Handle WebAssembly errors:</strong> the <code>WebAssembly.CompileError()</code> / <code>WebAssembly.LinkError()</code> / <code>WebAssembly.RuntimeError()</code> constructors.</li>
</ol>
<h3 id="2-1-Compiling-WASM-in-JavaScript"><a class="header-anchor" href="#2-1-Compiling-WASM-in-JavaScript">Â¶ </a>2.1 Compiling WASM in JavaScript</h3>
<p>WASM is a compiled binary, usually produced from C++ or Rust. I will explain how to generate WASM later. For now, assume we already have a compiled <code>*.wasm</code> file.</p>
<p>First, the browser downloads the <code>*.wasm</code> file, and then â€œcompilesâ€ it again in the browser. Even though WASM is already a compiled binary, it is closer to an IR (informally: a mid-stage compilation artifact), so after obtaining the raw bytes, the browser still compiles it into the final internal representation.</p>
<p>To compile WASM, we have the following options:</p>
<ul>
<li>Use <code>WebAssembly.compile()</code></li>
<li>Use <code>WebAssembly.compileStreaming()</code></li>
<li>Use the <code>WebAssembly.Module</code> constructor</li>
</ul>
<p>The difference is that <code>compile()</code> and <code>compileStreaming()</code> are asynchronous, and <code>compileStreaming()</code> compiles a stream while downloading. The <code>Module</code> constructor is synchronous. All three result in a <code>WebAssembly.Module</code> object.</p>
<p>A <code>WebAssembly.Module</code> indicates that the browser has finished compiling, and you can then pass the module to a Web Worker or instantiate it multiple times.</p>
<h4 id="2-1-1-WebAssembly-compile"><a class="header-anchor" href="#2-1-1-WebAssembly-compile">Â¶ </a>2.1.1 WebAssembly.compile()</h4>
<pre><code class="language-js">Promise&lt;WebAssembly.Module&gt; WebAssembly.compile(bufferSource);
</code></pre>
<p>Example for <code>WebAssembly.compile()</code>:</p>
<pre><code class="language-js">const worker = new Worker(&quot;wasm_worker.js&quot;);

// å…ˆæŠ“ WASM æª”æ¡ˆ
fetch('simple.wasm')
    .then(response =&gt;
        response.arrayBuffer()
    // ç·¨è­¯ bytes
    ).then(bytes =&gt;
        // åŒæ­¥ç·¨è­¯
        WebAssembly.compile(bytes)
    // å°‡ Module å‚³çµ¦ worker
    ).then(mod =&gt;
        worker.postMessage(mod)
    );
</code></pre>
<h4 id="2-1-2-WebAssembly-compileStreaming"><a class="header-anchor" href="#2-1-2-WebAssembly-compileStreaming">Â¶ </a>2.1.2 WebAssembly.compileStreaming()</h4>
<pre><code class="language-js">Promise&lt;WebAssembly.Module&gt; WebAssembly.compileStreaming(source);
</code></pre>
<p>Example for <code>WebAssembly.compileStreaming()</code>:</p>
<pre><code class="language-js">// ç•°æ­¥é‚Šä¸‹è¼‰é‚Šç·¨è­¯ WASM æª”æ¡ˆ
WebAssembly.compileStreaming(fetch('simple.wasm'))
    .then(module =&gt; &#123;
        // å¾—åˆ° WebAssembly.Module
    &#125;)
</code></pre>
<p>Note: when using <code>compileStreaming</code>, the serverâ€™s HTTP response header must mark the WASM file as <code>Application/wasm</code>.</p>
<h4 id="2-2-3-WebAssembly-Module-constructor"><a class="header-anchor" href="#2-2-3-WebAssembly-Module-constructor">Â¶ </a>2.2.3 WebAssembly.Module constructor</h4>
<pre><code class="language-js">new WebAssembly.Module(bufferSource);
</code></pre>
<p>Example for the <code>WebAssembly.Module</code> constructor:</p>
<pre><code class="language-js">fetch('simple.wasm').then(response =&gt;
  response.arrayBuffer()
).then(bytes =&gt; &#123;
  let mod = new WebAssembly.Module(bytes);
&#125;)
</code></pre>
<p>After compiling the WASM file into a <code>WebAssembly.Module</code>, you can instantiate it later, or pass the <code>Module</code> to a worker.</p>
<h3 id="2-2-Instantiating-WebAssembly"><a class="header-anchor" href="#2-2-Instantiating-WebAssembly">Â¶ </a>2.2 Instantiating WebAssembly</h3>
<p>You need to instantiate a <code>WebAssembly.Module</code> into a <code>WebAssembly.Instance</code> before you can actually use it.</p>
<p>To produce an <code>Instance</code>, you can use:</p>
<ul>
<li><code>WebAssembly.instantiate()</code></li>
<li><code>WebAssembly.instantiateStreaming()</code></li>
<li>the <code>WebAssembly.Instance</code> constructor</li>
</ul>
<p>The first two are asynchronous, while the constructor is synchronous.</p>
<h4 id="2-2-1-WebAssembly-instantiate"><a class="header-anchor" href="#2-2-1-WebAssembly-instantiate">Â¶ </a>2.2.1 WebAssembly.instantiate()</h4>
<pre><code class="language-js">Promise&lt;WebAssembly.Instance&gt; WebAssembly.instantiate(module, importObject);
Promise&lt;ResultObject&gt; WebAssembly.instantiate(bufferSource, importObject);
</code></pre>
<p><code>instantiate()</code> can take either WASM binary bytes or a compiled <code>Module</code>. In other words, you do not have to call <code>compile()</code> first; this gives you more flexibility in how you structure code. <code>importObject</code> is used to import functions, variables, and objects into the WASM module.</p>
<p><strong>I will explain how to use <code>importObject</code> in section â€œ2.3â€.</strong></p>
<p>If you pass a <code>Module</code>, it returns an <code>Instance</code>. If you pass WASM bytes, it returns <code>ResultObject &#123;instance: Instance, module: Module&#125;</code>.</p>
<p>Example for <code>WebAssembly.instantiate()</code>:</p>
<pre><code class="language-js">fetch('simple.wasm').then(response =&gt;
  response.arrayBuffer()
).then(bytes =&gt; &#123;
  let mod = new WebAssembly.Module(bytes);
  let instance = new WebAssembly.Instance(mod, importObject);
  instance.exports.exported_func(); // å‘¼å« WASM çš„ exported_func
&#125;)
</code></pre>
<p>You can access exported items via <code>instance.exports</code>.</p>
<h4 id="2-2-2-WebAssembly-instantiateStreaming"><a class="header-anchor" href="#2-2-2-WebAssembly-instantiateStreaming">Â¶ </a>2.2.2 WebAssembly.instantiateStreaming()</h4>
<pre><code class="language-js">Promise&lt;ResultObject&gt; WebAssembly.instantiateStreaming(bytes, importObject);
</code></pre>
<p><code>WebAssembly.instantiateStreaming()</code> only accepts a WASM stream. <code>importObject</code> is the imported object, and it produces <code>ResultObject &#123;instance: Instance, module: Module&#125;</code>.</p>
<p>Example:</p>
<pre><code class="language-js">WebAssembly.instantiateStreaming(fetch('simple.wasm'), importObject)
    .then(obj =&gt; obj.instance.exports.exported_func());
</code></pre>
<p>Similarly, when using <code>instantiateStreaming</code>, the server must mark the WASM response as <code>Application/wasm</code>.</p>
<h4 id="2-2-3-WebAssembly-Instance-constructor"><a class="header-anchor" href="#2-2-3-WebAssembly-Instance-constructor">Â¶ </a>2.2.3 WebAssembly.Instance constructor</h4>
<pre><code class="language-js">new WebAssembly.Instance(module, importObject);
</code></pre>
<p>When using the constructor, you can only pass a compiled <code>Module</code>. <code>importObject</code> is the same as above. Note that the constructor is synchronous: it blocks the thread. Instantiation is also often expensive, so unless you have a reason, the asynchronous methods are usually better.</p>
<pre><code class="language-js">fetch('simple.wasm').then(response =&gt;
  response.arrayBuffer()
).then(bytes =&gt; &#123;
  // å…ˆå–å¾— Module
  let mod = new WebAssembly.Module(bytes);
  // ç”¨ Module åˆå§‹åŒ–å¾—åˆ° Instance
  let instance = new WebAssembly.Instance(mod, importObject);
  instance.exports.exported_func();
&#125;)
</code></pre>
<h3 id="2-3-WebAssembly-Memory"><a class="header-anchor" href="#2-3-WebAssembly-Memory">Â¶ </a>2.3 WebAssembly Memory</h3>
<p>Currently, WASM must be bootstrapped from JS, and naturally the results produced by WASM are also consumed from JS. For this reason, <code>WebAssembly.Memory</code> provides a shared memory region that both JS and WASM can access.</p>
<pre><code class="language-js">const memory = new WebAssembly.Memory(&#123;initial:10, maximum:100, shared: true&#125;);
</code></pre>
<p><code>WebAssembly.Memory</code> is essentially an <code>ArrayBuffer</code> or <code>SharedArrayBuffer</code>. You can operate on raw memory directly via <code>memory.buffer</code>.</p>
<p><code>WebAssembly.Memory</code> has three parameters: <code>initial</code>, <code>maximum</code>, and <code>shared</code>. <code>initial</code> and <code>maximum</code> represent initial and maximum memory size, both measured in 64 kB pages (the memory page size). <code>shared</code> indicates whether this is shared memory.</p>
<p>There is both an initial size and a maximum size because <code>WebAssembly.Memory</code> can be resized dynamically via:</p>
<pre><code class="language-js">memory.grow(number);
</code></pre>
<p>This changes the memory size; <code>grow()</code> is also measured in 64 kB pages. In principle, <code>grow</code> should not have a large overhead because WASM memory is managed in pages and uses a manifest-like structure. The <a target="_blank" rel="noopener" href="https://webassembly.github.io/spec/core/exec/runtime.html#syntax-meminst">definition</a> is:</p>
<p>$$<br>
\begin{split}\begin{array}{llll}<br>
{\mathit{meminst}} &amp;::=&amp;<br>
\{ {\mathsf{data}}\ {\mathit{vec(bytes)}},\ {\mathsf{max}}\ {\mathit{u32}}^? \} \\<br>
\end{array}\end{split}<br>
$$</p>
<p>However, note that while the underlying operation is page-based and therefore does not have large overhead, every resize creates a new <code>ArrayBuffer</code> / <code>SharedArrayBuffer</code> object, and the old object is detached.</p>
<p>Example (<a target="_blank" rel="noopener" href="https://mdn.github.io/webassembly-examples/js-api-examples/memory.html">source</a>):</p>
<pre><code class="language-js">WebAssembly.instantiateStreaming(
  fetch('memory.wasm'), 
  &#123; js: &#123; mem: memory &#125; &#125; // ä»£è¡¨ WASM å®£å‘Šå¼•å…¥ js.mem
).then(obj =&gt; &#123;
    let i32 = new Uint32Array(memory.buffer);
    for (let i = 0; i &lt; 10; i++) &#123;
        i32[i] = i;
    &#125;
    let sum = obj.instance.exports.accumulate(0, 10);
    console.log(sum);
&#125;);
</code></pre>
<p>Before explaining the JS snippet above, letâ€™s look at what <code>memory.wasm</code> is.</p>
<p>Convert <code>memory.wasm</code> to WAT (human-readable format):</p>
<pre><code>(module
  (memory (import &quot;js&quot; &quot;mem&quot;) 1)
  (func (export &quot;accumulate&quot;) (param $ptr i32) (param $len i32) (result i32)
    (local $end i32)
    (local $sum i32)
    (local.set $end (i32.add (local.get $ptr) (i32.mul (local.get $len) (i32.const 4))))
    (block $break (loop $top
      (br_if $break (i32.eq (local.get $ptr) (local.get $end)))
      (local.set $sum (i32.add (local.get $sum)
                               (i32.load (local.get $ptr))))
        (local.set $ptr (i32.add (local.get $ptr) (i32.const 4)))
        (br $top)
    ))
    (local.get $sum)
  )
)
</code></pre>
<p>This line means WASM imports <code>js.mem</code>, so in <code>importObject</code> we must define <code>js.mem</code> and set it to a <code>WebAssembly.Memory</code> object:</p>
<pre><code>(memory (import &quot;js&quot; &quot;mem&quot;) 1)
</code></pre>
<p>Then WASM defines an <code>accumulate</code> function that sums an input array and returns the result:</p>
<pre><code>(func (export &quot;accumulate&quot;) (param $ptr i32) (param $len i32) (result i32)
</code></pre>
<p>So in the JS example, we first write values into <code>memory.buffer</code> via <code>i32</code>. At that point, <code>js.mem</code> inside WASM contains those values.</p>
<pre><code class="language-js">let i32 = new Uint32Array(memory.buffer);
</code></pre>
<p>Then we execute WASMâ€™s <code>accumulate()</code> via <code>instance.exports.accumulate()</code>, and we can get the answer:</p>
<pre><code class="language-js">let sum = obj.instance.exports.accumulate(0, 10);
</code></pre>
<h3 id="2-4-WebAssembly-Table"><a class="header-anchor" href="#2-4-WebAssembly-Table">Â¶ </a>2.4 WebAssembly Table</h3>
<p>Unlike WebAssembly Memory, which shares data between JS and WASM, <code>WebAssembly.Table</code> wraps internal WASM functions into a table that can be accessed or modified by JS or WASM. It stores function references (Function Reference). (Informally: a table you can use to see which functions exist in WASM.)</p>
<pre><code class="language-js">const table = new WebAssembly.Table(&#123;
                element: &quot;anyfunc&quot;, // è¡¨æ ¼ç‰©ä»¶å‹åˆ¥ï¼Œç›®å‰åªèƒ½æ˜¯ã€Œä»»æ„å‡½æ•¸ã€
                initial: Number, // å¤šå°‘å€‹å…ƒç´ 
                maximum: Number? // Optionalï¼Œè¡¨å¯ä»¥æ“´å±•çš„æœ€å¤§å€¼
              &#125;);
</code></pre>
<p>You can use <code>table.get(index)</code> to get an element, <code>table.set(index)</code> to set an element, and <code>table.grow(number)</code> to grow the table.</p>
<p>Example:</p>
<pre><code class="language-js">const tbl = new WebAssembly.Table(&#123;initial: 2, element: &quot;anyfunc&quot;&#125;);
console.log(tbl.length);  // &quot;2&quot;
// æ­¤æ™‚æ­¤åˆ»ï¼Œtable é‚„æ˜¯ç©ºçš„
console.log(tbl.get(0));  // &quot;null&quot; 
console.log(tbl.get(1));  // &quot;null&quot;


const importObj = &#123;js: &#123;tbl: tbl&#125;&#125;;
WebAssembly.instantiateStreaming(fetch('table2.wasm'), importObject)
  .then(function(obj) &#123;
    // è¡¨æ ¼å·²ç¶“å’Œ WASM åŒæ­¥
    console.log(tbl.get(0)()); // å‘¼å« table ç¬¬ 0 å€‹å…ƒç´ ä»£è¡¨çš„å‡½æ•¸
    console.log(tbl.get(1)());  // å‘¼å« table ç¬¬ 1 å€‹å…ƒç´ ä»£è¡¨çš„å‡½æ•¸
  &#125;);
</code></pre>
<p><code>tbl.get(0)()</code> means you first get the function reference <code>tbl.get(0)</code>, and then call it with <code>()</code>.</p>
<p>Letâ€™s see what <code>table.wasm</code> looks like:</p>
<pre><code>(module
    (import &quot;js&quot; &quot;tbl&quot; (table 2 anyfunc))
    (func $f42 (result i32) i32.const 42)
    (func $f83 (result i32) i32.const 83)
    (elem (i32.const 0) $f42 $f83)
)
</code></pre>
<p>It imports <code>js.tbl</code> as a <code>table</code>, and then fills it with references to two functions.</p>
<h3 id="2-5-WebAssembly-Global"><a class="header-anchor" href="#2-5-WebAssembly-Global">Â¶ </a>2.5 WebAssembly Global</h3>
<p><code>WebAssembly.Global</code> is a <code>Global</code> object that can be accessed by JS and by multiple WASM modules. Its biggest value is that it enables dynamic linking between different modules.</p>
<p>WASM can be compiled from languages such as C++. When compiling C++, we can link multiple <code>cpp</code> files together. WASM can do something similar, and it uses <code>Global</code> to achieve that. WASM compilers such as Emscripten produce WASM that relies on this mechanism.</p>
<pre><code class="language-js">new WebAssembly.Global(descriptor &#123;value, mutable&#125;, value);
</code></pre>
<p>In the first argument <code>descriptor</code>, <code>value</code> is the type, and <code>mutable</code> indicates whether it can be modified. The second argument <code>value</code> is the initial value. If you only pass <code>0</code>, it uses the default value.</p>
<p>Example (<a target="_blank" rel="noopener" href="https://mdn.github.io/webassembly-examples/js-api-examples/global.html">source</a>):</p>
<pre><code class="language-js">const global = new WebAssembly.Global(
  &#123;value:'i32', mutable:true&#125;, // å¯è®Šçš„ i32
   0 // å¡«å…¥é è¨­å€¼
);

WebAssembly.instantiateStreaming(fetch('global.wasm'), &#123; js: &#123; global &#125; &#125;)
  .then((&#123;instance&#125;) =&gt; &#123;
      global.value = 42; // ç”¨ JS è¨­ç‚º 42
      instance.exports.incGlobal(); // incGlobal æ˜¯ WASM çš„å‡½æ•¸ï¼Œå¯ä»¥åŠ ä¸€ï¼Œæ‰€ä»¥ç¾åœ¨æ˜¯ 43
      assertEq(global.value, 43); // ç¢ºèªæ˜¯ 43 ç„¡èª¤
  &#125;);
</code></pre>
<h3 id="2-6-WebAssembly-Error"><a class="header-anchor" href="#2-6-WebAssembly-Error">Â¶ </a>2.6 WebAssembly Error</h3>
<p>WASM defines three error types: <code>WebAssembly.CompileError</code>, <code>WebAssembly.LinkError</code>, and <code>WebAssembly.RuntimeError</code>.</p>
<pre><code class="language-js">new WebAssembly.CompileError(message, fileName, lineNumber)
new WebAssembly.LinkError(message, fileName, lineNumber)
new WebAssembly.RuntimeError(message, fileName, lineNumber)
</code></pre>
<p>They are used in the same way. Example:</p>
<pre><code class="language-js">try &#123;
  throw new WebAssembly.CompileError('Hello', 'someFile', 10);
&#125; catch (e) &#123;
  console.log(e instanceof CompileError); // true
  console.log(e.message);                 // &quot;Hello&quot;
  console.log(e.name);                    // &quot;CompileError&quot;
  console.log(e.fileName);                // &quot;someFile&quot;
  console.log(e.lineNumber);              // 10
  console.log(e.columnNumber);            // 0
  console.log(e.stack);                   // returns the location where the code was run
&#125;
</code></pre>
<h2 id="3-Applications"><a class="header-anchor" href="#3-Applications">Â¶ </a>3. Applications</h2>
<h3 id="3-1-A-simple-C-function"><a class="header-anchor" href="#3-1-A-simple-C-function">Â¶ </a>3.1 A simple C function</h3>
<pre><code class="language-c">// square.c
int square(int n) &#123; 
   return n*n; 
&#125;
</code></pre>
<p>Compile with Emscripten:</p>
<pre><code class="language-shell">$ emcc square.c -s SIDE_MODULE -o square.wasm
</code></pre>
<p>For Emscripten usage, you can refer to my earlier <a href="/post/2020/07/js/emscripten-pthread-to-js/#Emscripten-%E4%B8%8B%E8%BC%89">introduction</a>. Note that we must add <code>-s SIDE_MODULE</code> to indicate this WASM is not a runtime, and specify <code>-o *.wasm</code> to output only WASM; otherwise, Emscripten outputs JS + WASM by default.</p>
<p>Convert the compiled WASM to WAT:</p>
<pre><code>$ ./wasm2wat square.wasm
(module
  (type (;0;) (func))
  (type (;1;) (func (param i32) (result i32)))
  (func (;0;) (type 0)
    nop)
  (func (;1;) (type 1) (param i32) (result i32)
    local.get 0
    local.get 0
    i32.mul)
  (global (;0;) i32 (i32.const 0))
  (export &quot;__wasm_apply_relocs&quot; (func 0))
  (export &quot;square&quot; (func 1))
  (export &quot;__dso_handle&quot; (global 0))
  (export &quot;__post_instantiate&quot; (func 0)))
</code></pre>
<p>The key part is <code>(export &quot;square&quot; (func 1))</code>. The other unrelated exports can be ignored.</p>
<p>Next, write a web page <code>square.html</code>:</p>
<pre><code class="language-html">&lt;!-- square.html --&gt;
&lt;script&gt;
    (async () =&gt; &#123;
        const res = await fetch(&quot;square.wasm&quot;);
        const wasmFile = await res.arrayBuffer();
        const module = await WebAssembly.compile(wasmFile);
        const instance = await WebAssembly.instantiate(module);

        const square = instance.exports.square(13);
        console.log(&quot;The square of 13 = &quot; + square);
    &#125;)();
&lt;/script&gt;
</code></pre>
<p>Put <code>square.html</code> and <code>square.wasm</code> in the same directory, serve them via an HTTP server (so the WASM can be fetched), and open the page. You will see the result in the console.</p>
<h3 id="3-2-A-C-function-using-WebAssembly-Memory"><a class="header-anchor" href="#3-2-A-C-function-using-WebAssembly-Memory">Â¶ </a>3.2 A C function using WebAssembly.Memory</h3>
<p>This example is essentially the same as what we did in â€œ2.3â€, except it demonstrates the flow starting from C.</p>
<pre><code class="language-c">// accumulate.c
int arr[];

int accumulate(int start, int end) &#123; 
   int sum = 0;
   for(int i = start; i &lt; end; i++) &#123;
      sum += arr[i];
   &#125;
   return sum;
&#125;
</code></pre>
<pre><code class="language-shell">$  emcc accumulate.c  -O3  -s SIDE_MODULE  -o accumulate.wasm
</code></pre>
<p>Convert to WAT:</p>
<pre><code>(module
  (type (;0;) (func))
  (type (;1;) (func (result i32)))
  (type (;2;) (func (param i32 i32) (result i32)))
  (import &quot;env&quot; &quot;g$arr&quot; (func (;0;) (type 1)))
  (import &quot;env&quot; &quot;__memory_base&quot; (global (;0;) i32))
  (import &quot;env&quot; &quot;memory&quot; (memory (;0;) 0))
  // çœç•¥
</code></pre>
<p>From this, we can see <code>accumulate.wasm</code> imports <code>env.__memory_base</code>, <code>env.memory</code>, and <code>env.g$arr</code>, so we must define them in JS first.</p>
<p>The web page code for <code>accumulate.html</code> is:</p>
<pre><code class="language-html">&lt;!-- accumulate.html --&gt;
&lt;script&gt;
    const memory = new WebAssembly.Memory(&#123;
        initial: 1,
    &#125;);

    const importObj = &#123;
        // æ ¹æ“š WASM ä¾†å®£å‘Š
        env: &#123;
            memory: memory,
            __memory_base: 0,
            g$arr: () =&gt; &#123;&#125;
        &#125;
    &#125;;

    (async () =&gt; &#123;
        const res = await fetch(&quot;accumulate.wasm&quot;);
        const wasmFile = await res.arrayBuffer();
        const module = await WebAssembly.compile(wasmFile);
        const instance = await WebAssembly.instantiate(module, importObj);

        const arr = new Uint32Array(memory.buffer);
        for (let i = 0; i &lt; 10; i++) &#123;
            arr[i] = i;
        &#125;

        const sum = instance.exports.accumulate(0, 10);
        console.log(&quot;accumulate from 0 to 10: &quot; + sum);
    &#125;)();
&lt;/script&gt;
</code></pre>
<p>Because WASM requires <code>env.memory</code>, we first declare a <code>WebAssembly.Memory</code> object. <code>env.__memory_base</code> indicates where in memory to begin reading.</p>
<p>In the original C code, we only have the global <code>arr[]</code>, so <code>env.memory</code> is effectively the backing storage for <code>arr[]</code>. Finally, for some reason Emscripten generates <code>env.g$arr</code>; it seems unused, so we provide an empty function.</p>
<h3 id="3-3-Compiling-Pthreads-to-JS-WASM"><a class="header-anchor" href="#3-3-Compiling-Pthreads-to-JS-WASM">Â¶ </a>3.3 Compiling Pthreads to JS + WASM</h3>
<p>With Emscripten, we can easily compile Pthread programs into Web Workers + SharedArrayBuffer + WebAssembly, and run parallel programs in the browser.</p>
<p>For details, see my earlier post â€œ<a href="/post/2020/07/js/emscripten-pthread-to-js">Converting Pthreads to JavaScript with Emscripten and Performance Analysis</a>â€ and its follow-up â€œ<a href="/post/2020/08/js/emscripten-pthread-to-js-2/">Pthread to WASM: Merge Sort</a>â€.</p>
<h2 id="4-Conclusion"><a class="header-anchor" href="#4-Conclusion">Â¶ </a>4. Conclusion</h2>
<p>This post provided a comprehensive overview of the JavaScript APIs for WebAssembly, and demonstrated how to generate WASM from C code and use it from JavaScript in a web page.</p>
<p>WebAssembly is very likely the future trend of the web. As devices become more powerful, our expectations for performance increase. At the same time, WASM itself continues to evolveâ€”such as supporting threads directly in WASM in the future, or enabling SIMD instructions. WASM is also expanding beyond the web: embedded devices and cloud services are beginning to adopt it as well. Overall, WASMâ€™s future is worth looking forward to.</p>
<p>I often feel that many online articles miss something in terms of reasoning and structure. So I reorganized online resources and presented the WASM concepts in what I think is the most logical order. I hope it helps.</p>
<h2 id="5-References"><a class="header-anchor" href="#5-References">Â¶ </a>5. References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly">MDN: WebAssembly</a></li>
<li><a target="_blank" rel="noopener" href="https://webassembly.github.io/spec/js-api/#webassembly-namespace">WebAssembly JS API SPEC</a></li>
<li><a target="_blank" rel="noopener" href="https://webassembly.github.io/spec/core/exec/index.html">WebAssembly Execution SPEC</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/emscripten-core/emscripten/wiki/WebAssembly-Standalone">WebAssembly Standalone</a></li>
</ul>

    </div>
    

    <a href="/books/beyond-just-coding-book.html" onclick="gtag('event', 'click_book_banner', {'link_url': this.href});">
        <picture>
            <!-- For screens wider than 600px -->
            <source media="(min-width: 600px)" srcset="/img/new-book-banner.png" class="new-book-banner-image">
            
            <!-- Default image for smaller screens -->
            <img src="/img/new-book-banner-small.png" alt="ã€Šç¨‹å¼è¨­è¨ˆåŸä¾†ä¸åªæœ‰å¯« CODEï¼ã€‹æ–°æ›¸æ©«å¹…å»£å‘Š" class="new-book-banner-image">
        </picture>
    </a>

   
    <div class="post-tag">
        tags:&nbsp;
        
            <a href="/en/tags/browsers/">
                browsers
            </a>,&nbsp;
        
            <a href="/en/tags/javascript/">
                JavaScript
            </a>,&nbsp;
        
            <a href="/en/tags/webassembly/">
                WebAssembly
            </a>,&nbsp;
        
    </div>
    
<script>
    hljs.configure({
        useBR: false
    });
    document.querySelectorAll('.code').forEach((block) => {
        hljs.highlightBlock(block);
    });
    document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
    });
</script>

<p class="post-end-line-small">
    å¦‚æœæ‚¨è¦ºå¾—é€™ç¯‡æ–‡ç« æœ‰å¹«åŠ©ï¼Œæ‚¨å¯ä»¥ <a href="/donation/">è´ŠåŠ©</a> é€™å€‹ç¶²ç«™ï¼
    æ­¤å¤–ä¹Ÿå¯ä»¥å» <a href="/message">å…¨ç«™ç•™è¨€æ¿</a> ä¾†ç•™è¨€å–”ï¼
</p>

        </main>
        <aside class="aside">
            <div class="close"></div>
            <section class="aside-section">
                
<h2>About Me</h2>
<img alt="my photo" width="80%" src="/img/selfie3.jpg">
<div class="about">
  Liu, An-Chi åŠ‰å®‰é½Š<br>
  Software Engineer<br>
  @tigercosmos
</div>


            </section>
            <section class="aside-section">
                
    <h2>æ–°æ›¸ä¸Šå¸‚</h2>
    <a href="/books/beyond-just-coding-book.html" onclick="gtag('event', 'click_book_side', {'link_url': this.href});">
        <img alt="æ–°æ›¸æ¨å»£ï¼šã€Šç¨‹å¼è¨­è¨ˆåŸä¾†ä¸åªæœ‰å¯« CODEï¼éŠœæ¥å­¸æ ¡èˆ‡è·å ´çš„äº”å ‚è»Ÿé«”é–‹ç™¼å¯¦ç¿’èª²ã€‹" width="100%" src="/img/new-book-banner-small.png">
    </a>

            </section>
            
                <section class="aside-section">
                    <h2>TOC</h2>
<div class="toc-container">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Introduction"><span class="toc-text">1. Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-WebAssembly-JavaScript-API-overview"><span class="toc-text">2. WebAssembly JavaScript API overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Compiling-WASM-in-JavaScript"><span class="toc-text">2.1 Compiling WASM in JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-WebAssembly-compile"><span class="toc-text">2.1.1 WebAssembly.compile()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-WebAssembly-compileStreaming"><span class="toc-text">2.1.2 WebAssembly.compileStreaming()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-WebAssembly-Module-constructor"><span class="toc-text">2.2.3 WebAssembly.Module constructor</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Instantiating-WebAssembly"><span class="toc-text">2.2 Instantiating WebAssembly</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-WebAssembly-instantiate"><span class="toc-text">2.2.1 WebAssembly.instantiate()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-WebAssembly-instantiateStreaming"><span class="toc-text">2.2.2 WebAssembly.instantiateStreaming()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-WebAssembly-Instance-constructor"><span class="toc-text">2.2.3 WebAssembly.Instance constructor</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-WebAssembly-Memory"><span class="toc-text">2.3 WebAssembly Memory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-WebAssembly-Table"><span class="toc-text">2.4 WebAssembly Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-WebAssembly-Global"><span class="toc-text">2.5 WebAssembly Global</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-WebAssembly-Error"><span class="toc-text">2.6 WebAssembly Error</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Applications"><span class="toc-text">3. Applications</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-A-simple-C-function"><span class="toc-text">3.1 A simple C function</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-A-C-function-using-WebAssembly-Memory"><span class="toc-text">3.2 A C function using WebAssembly.Memory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Compiling-Pthreads-to-JS-WASM"><span class="toc-text">3.3 Compiling Pthreads to JS + WASM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Conclusion"><span class="toc-text">4. Conclusion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-References"><span class="toc-text">5. References</span></a></li></ol>
</div>
                </section>
            
            <section class="aside-section">
                
<div class="recent-post">
  <h2>Recent Posts</h2>
  <ul>
    
    
    
    <li>
      <a href="/en/post/2025/10/japan/find-swe-job-in-japan-2025/">
        My 2025 Fall Mid-Level SWE Job Hunt in Japan and Taiwan
      </a>
    </li>
    
    <li>
      <a href="/en/post/2025/10/cv/3d-pointcloud-project-to-2d-image/">
        3D Point Cloud Projection onto a 2D Image in C++
      </a>
    </li>
    
    <li>
      <a href="/en/post/2025/06/software-engineer/software-engineer-grow-up-4/">
        New Software Engineer in Training (4): Promoted to Mid-Level Engineer, Quitting to Start a Company (Finale)
      </a>
    </li>
    
    <li>
      <a href="/en/post/2025/02/algorithm/bts-tree-delete/">
        Deleting a Node in a Binary Search Tree (LeetCode 450: Delete Node in a BST)
      </a>
    </li>
    
    <li>
      <a href="/en/post/2024/12/c++/hash/">
        An Introduction to std::hash in C++
      </a>
    </li>
    
    <li>
      <a href="/en/post/2024/11/c++/std-string-advanced/">
        C++ std::string Advanced: One Article to Get You Comfortable with Strings!
      </a>
    </li>
    
    <li>
      <a href="/en/post/2024/09/software-engineer/software-engineer-grow-up-3/">
        New Software Engineer in Training (3): Breakthrough Growth and Becoming an Open Source Maintainer
      </a>
    </li>
    
    <li>
      <a href="/en/post/2023/12/japan/learn-japanese-n4/">
        My Three-Month JLPT N4 Self-Study Experience
      </a>
    </li>
    
    <li>
      <a href="/en/post/2023/11/python/2023pycon-apac-sprint/">
        My First CPython Pull Request at the PyCon APAC 2023 Sprint
      </a>
    </li>
    
    <li>
      <a href="/en/post/2023/11/software-engineer/software-engineer-grow-up-2/">
        New Software Engineer in Training (2): Workplace Socialization and Survival
      </a>
    </li>
    
  </ul>
</div>


            </section>
            <section class="aside-section">
                
<h2>Search</h2>
<input class="search-input" type="text" placeholder="Search on Google">
<script>
    const input = document.getElementsByClassName("search-input");
    input[0].addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            window.open("https://www.google.com/search?&q=site%3Atigercosmos.xyz+" + input[0].value);
        }
    });
</script>

            </section>
            <section class="aside-section">
                <div>
     <h2>è´ŠåŠ©å¯«ä½œ</h2>
     è¬è¬æ‚¨çš„å”åŠ©ï¼Œè«‹ä½œè€…å–ä¸€æ¯å’–å•¡ï¼Œèƒ½è®“ä½œè€…ç”¨ä¾†æ›´æœ‰å‹•åŠ›ç‚ºè®€è€…æä¾›å“è³ªæ›´åŠ å„ªè‰¯çš„æ–‡ç« èˆ‡é–±è®€ç’°å¢ƒ
     <div align="center">
          <a href='/donation'><img
                    src="https://user-images.githubusercontent.com/18013815/79032455-21002a00-7bd9-11ea-920f-354c6133cc2a.png"
                    width="80%"></a>
     </div>
</div>
            </section>
            <section class="aside-section">
                
    <h2>Archives</h2>

    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2025/">2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2024/">2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2023/">2023</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2022/">2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2021/">2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2020/">2020</a><span class="archive-list-count">30</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2019/">2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2018/">2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2017/">2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/en/archives/2016/">2016</a><span class="archive-list-count">2</span></li></ul>


            </section>
            <section class="aside-section tag">
                
    <h2>Tags</h2>

    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/2d-pattern/" rel="tag">2d pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/ai/" rel="tag">ai</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/algorithm/" rel="tag">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/amd-mi50/" rel="tag">amd mi50</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/array/" rel="tag">array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/art/" rel="tag">art</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/atmospheric-sciences/" rel="tag">atmospheric sciences</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/atomic/" rel="tag">atomic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/bag-of-visual-words/" rel="tag">bag of visual words</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/bag-of-words/" rel="tag">bag of words</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/benchmark/" rel="tag">benchmark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/bias/" rel="tag">bias</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/bime/" rel="tag">bime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/binary-search-tree/" rel="tag">binary search tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/browser/" rel="tag">browser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/browsers/" rel="tag">browsers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/c/" rel="tag">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/c/" rel="tag">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/camera/" rel="tag">camera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/camera-calibration/" rel="tag">camera calibration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cmake/" rel="tag">cmake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/collision-detection/" rel="tag">collision detection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/company/" rel="tag">company</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/compare-and-swap/" rel="tag">compare and swap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/computational-photography/" rel="tag">computational photography</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/computer-animation/" rel="tag">computer animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/computer-science/" rel="tag">computer science</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/computer-vision/" rel="tag">computer vision</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/condition-variable/" rel="tag">condition variable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/courses/" rel="tag">courses</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cpu/" rel="tag">cpu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cpython/" rel="tag">cpython</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cublas/" rel="tag">cublas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cuda/" rel="tag">cuda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/cudnn/" rel="tag">cudnn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/data-structures/" rel="tag">data structures</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/debug/" rel="tag">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/deep-learning/" rel="tag">deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/deno/" rel="tag">deno</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/digital-processing/" rel="tag">digital processing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/dns/" rel="tag">dns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/dup2/" rel="tag">dup2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/eigen/" rel="tag">eigen</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/elixir/" rel="tag">elixir</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/english/" rel="tag">english</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/feature-matching/" rel="tag">feature matching</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/fine-arts-club/" rel="tag">fine arts club</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/floating-point-number/" rel="tag">floating-point number</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/fork/" rel="tag">fork</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/forward-kinematics/" rel="tag">forward kinematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/fourier-transform/" rel="tag">fourier transform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/gdb/" rel="tag">gdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/googlenet/" rel="tag">googlenet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/googletest/" rel="tag">googletest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/gpu/" rel="tag">gpu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/graduate-school/" rel="tag">graduate school</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/hash/" rel="tag">hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/hdr/" rel="tag">hdr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/header-only/" rel="tag">header-only</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/homography/" rel="tag">homography</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/http-server/" rel="tag">http server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/hybrid-image/" rel="tag">hybrid image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E2%80%8Eieee-754/" rel="tag">â€ieee 754</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/image-classification/" rel="tag">image classification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/image-processing/" rel="tag">image processing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/image-stitching/" rel="tag">image stitching</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/impulse/" rel="tag">impulse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/intel/" rel="tag">intel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/inverse-kinematics/" rel="tag">inverse kinematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/jacobian/" rel="tag">jacobian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/japan/" rel="tag">japan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/japanese/" rel="tag">japanese</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/jlpt/" rel="tag">jlpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/job/" rel="tag">job</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/joint-constraint/" rel="tag">joint constraint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/keypoint/" rel="tag">keypoint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/kmeans/" rel="tag">kmeans</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/knn/" rel="tag">knn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/language-learning/" rel="tag">language learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/leetcode-450/" rel="tag">leetcode 450</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/lock-free/" rel="tag">lock free</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/master-s/" rel="tag">master's</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/measurement/" rel="tag">measurement</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/mmap/" rel="tag">mmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/nchc/" rel="tag">nchc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/nctu-observations-and-reflections/" rel="tag">nctu observations and reflections</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/network-analysis/" rel="tag">network analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/network-programming/" rel="tag">network programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/new-software-engineer-in-training/" rel="tag">new software engineer in training</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/nlp/" rel="tag">nlp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/note/" rel="tag">note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/ntu/" rel="tag">ntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/ntu-observations-and-reflections/" rel="tag">ntu observations and reflections</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/nycu-icse/" rel="tag">nycu icse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/open-source/" rel="tag">open source</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/open-source-projects/" rel="tag">open source projects</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/opencl/" rel="tag">opencl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/opencv/" rel="tag">opencv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/optimization/" rel="tag">optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/parallel-programming/" rel="tag">parallel programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pcap/" rel="tag">pcap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pcapplusplus/" rel="tag">pcapplusplus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/perf/" rel="tag">perf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/physics/" rel="tag">physics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pipe/" rel="tag">pipe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/point-cloud/" rel="tag">point cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/programming/" rel="tag">programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/projection/" rel="tag">projection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/projects/" rel="tag">projects</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/promiscuous-mode/" rel="tag">promiscuous mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pseudo-inverse/" rel="tag">pseudo inverse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pthread/" rel="tag">pthread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pycon/" rel="tag">pycon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/pytorch/" rel="tag">pytorch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/ransac/" rel="tag">ransac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/red-black-tree/" rel="tag">red black tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/reentrancy/" rel="tag">reentrancy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/rigid-body/" rel="tag">rigid body</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/rust/" rel="tag">rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/servo/" rel="tag">servo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/shared-memory/" rel="tag">shared memory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/shared-object/" rel="tag">shared object</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/sift/" rel="tag">sift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/sigaction/" rel="tag">sigaction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/signal/" rel="tag">signal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/simulation/" rel="tag">simulation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/small-vector/" rel="tag">small vector</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/software-engineer/" rel="tag">software engineer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/spec-accel/" rel="tag">spec accel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/spec-cpu/" rel="tag">spec cpu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/squid/" rel="tag">squid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/sso/" rel="tag">sso</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/startup/" rel="tag">startup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/std-hash/" rel="tag">std::hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/std-unordered-map/" rel="tag">std::unordered_map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/std-unordered-set/" rel="tag">std::unordered_set</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/string/" rel="tag">string</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/string-view/" rel="tag">string_view</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/svm/" rel="tag">svm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/system/" rel="tag">system</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/system-software/" rel="tag">system software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/t2/" rel="tag">t2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/taiwan/" rel="tag">taiwan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/teaching-assistant/" rel="tag">teaching assistant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/template/" rel="tag">template</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/tensorflow/" rel="tag">tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/thoughts/" rel="tag">thoughts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/thread-safe/" rel="tag">thread-safe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/time-stacking/" rel="tag">time stacking</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/time-warping/" rel="tag">time warping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/tokyo/" rel="tag">tokyo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/top-command/" rel="tag">top command</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/unit-test/" rel="tag">unit test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/university/" rel="tag">university</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/unix/" rel="tag">unix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/vector/" rel="tag">vector</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/vgg16/" rel="tag">vgg16</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/web-worker/" rel="tag">web worker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/webassembly/" rel="tag">webassembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/work/" rel="tag">work</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/xr-project/" rel="tag">xr project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E5%8F%8D%E5%90%91%E5%8B%95%E5%8A%9B%E6%B3%95/" rel="tag">åå‘å‹•åŠ›æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E5%B9%B3%E8%A1%8C%E5%8C%96/" rel="tag">å¹³è¡ŒåŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E6%95%88%E8%83%BD%E5%88%86%E6%9E%90/" rel="tag">æ•ˆèƒ½åˆ†æ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E6%99%82%E9%96%93%E6%89%AD%E6%9B%B2%E6%B3%95/" rel="tag">æ™‚é–“æ‰­æ›²æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E6%A8%A1%E6%93%AC/" rel="tag">æ¨¡æ“¬</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E6%AD%A3%E5%90%91%E5%8B%95%E5%8A%9B%E6%B3%95/" rel="tag">æ­£å‘å‹•åŠ›æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E6%BC%94%E7%AE%97%E6%B3%95/" rel="tag">æ¼”ç®—æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E7%89%A9%E7%90%86/" rel="tag">ç‰©ç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E9%99%A3%E5%88%97/" rel="tag">é™£åˆ—</a></li><li class="tag-list-item"><a class="tag-list-link" href="/en/tags/%E9%9B%BB%E8%85%A6%E5%8B%95%E7%95%AB/" rel="tag">é›»è…¦å‹•ç•«</a></li></ul>


            </section>
        </aside>
    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>
